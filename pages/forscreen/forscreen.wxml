<view class="container">

  <!-- 选择图片 -->
  <!--<view class="full_width display_{{showView?'show':'hide'}} " >
    <view class='pic_tip_top'>
      <label class='tip_font_32'>您已连接【{{hotel_room}}】的电视</label>
    </view>
    <view class='pic_div_body'>
      <view class='choose_pic_default_container'>
        <image class='choose_pic_default' src="{{tempFilePaths}}" mode='aspectFit' ></image>
      </view>
      <view class="choose_button_pic">
        <image class='choose_button' src='/images/button_pic_to_tv.png' bindtap="chooseImage" data-boxmac="{{box_mac}}" data-openid="{{openid}}" ></image>
      </view>
    </view
    
  </view>-->
  <scroll-view  class="scroll_container display_{{showView?'show':'hide'}}" bindscrolltolower="loadMore" data-boxmac="{{box_mac}}" scroll-y="true" scroll-with-animation="true">
    <!-- 循环开始 -->
    <view class='article' wx:for="{{program_list}}" wx:key="key"  wx:for-item="list" wx:for-index="index">
      <view class='title'>
        <label class='font_white_28'>{{list.name}}</label>
      </view>
      <view class='operation'>
        <navigator url="/pages/forscreen/video/launch_video?video_url={{list.oss_addr}}&video_name={{list.name}}"><button>手机播放</button></navigator>
        <navigator bindtap='boxShow' data-name="{{list.name}}" data-vediourl="{{list.oss_addr}}" data-boxmac="{{box_mac}}" data-openid="{{openid}}" ><button>电视播放</button></navigator>
      </view>
      <view class='video_info'>
        <label>{{list.duration}}</label>
      </view>
      <view class='cover'>
        <image src='{{list.img_url}}'></image>
      </view>
    </view>
    <!-- 循环结束 -->
    <view class="body-view">
        <loading hidden="{{hiddens}}" bindchange="loadingChange">
            加载中...
        </loading>
    </view>
  </scroll-view>
  <view class="fix_container display_{{showView?'show':'hide'}}">
    <view class='top'>
      <label>您已连接到【{{hotel_room}}】电视</label>
      <button bindtap='breakLink' data-boxmac="{{box_mac}}" data-openid="{{openid}}">断开连接</button>
    </view>
    <view class='operation flex_row_center'>
      <view>
        <image src='/images/btn_pic.png' bindtap="chooseImage" data-boxmac="{{box_mac}}" data-openid="{{openid}}"></image>
        <label class='font_d_red_24'>照片上电视</label>
      </view>
      <view>
        <image src='/images/btn_play.png' bindtap='chooseVedio' data-boxmac="{{box_mac}}" data-openid="{{openid}}"></image>
        <label class='font_d_red_24'>视频上电视</label>
      </view>
      <view>
        <image src='/images/btn_music.png' bindtap='boxShow' data-boxmac="{{box_mac}}" data-openid="{{openid}}" data-vediourl="{{happy_vedio_url}}" data-happyVedioName="{{happy_vedio_name}}" data-name="{{happy_vedio_title}}"></image>
        <label class='font_d_red_24'>生日快乐</label>
      </view>
    </view>
  </view>


  
  <!-- 输入验证 -->
  <form  class="full_width display_{{showCode?'show':'hide'}}">
    <view class='input_num'>
      <image class='input_pic_banner' src='/images/pic_check_code_banner.jpg'></image>
      <view class='content'>
        <block wx:for="{{Length}}" wx:key="item">
          <input class="input iptbox" type="number"   value="{{Value.length>=index+1?Value[index]:''}}" disabled password='{{ispassword}}' catchtap='Tap'></input>
        </block>
      </view>
      <label class='input_tip tip_font_34'>请输入电视中的三位数连接电视</label>
      <input type="number" name="password" data-boxmac="{{box_mac}}" data-openid="{{openid}}" value="{{pwds}}" password="{{true}}" class='ipt' maxlength="{{Length}}" focus="{{isFocus}}" bindinput="Focus"></input>
      <input name="openid" class="display_hide" value="{{openid}}"></input>
      <input name="box_mac" class="display_hide" value="{{box_mac}}"></input>
      
    </view>
  </form>

  <!-- 图片展示页面 -->
  <view class="choose_pic_show_page display_{{showSecond?'show':'hide'}} container">
    <!--<view class='choose_pic_show_container'>
      <image class='choose_pic_show' src='{{tempFilePaths}}' mode='aspectFit' ></image>
    </view>-->
    <view class="pic_tip_top display_{{showThird?'show':'hide'}}">
      <view class='full_width tip_font_28'>
        <label style='position: relative;float: left;margin-left:40rpx;'>图片加载成功后，选择照片，电视开始展示</label>
        <label class='link_relief'><navigator url="/pages/forscreen/relief">免责声明</navigator></label>
      </view>
    </view>
    <form bindsubmit="up_forscreen">
      <view class="weui-grids grids-frame">
        <view class="weui-grid" wx:for="{{up_imgs}}" wx:key="key"  wx:for-item="img" wx:for-index="index" >
          <view class="pic_show">
            <image class="pic_show {{pic_show_cur[index]?'pic_show_cur':''}}" mode='aspectFill' bindtap='up_single_pic' data-img="{{tmp_imgs[index].oss_img}}" data-boxmac="{{box_mac}}" data-openid="{{openid}}" data-imgindex="{{index}}" data-imglen="{{img_lenth}}" src="{{img.tmp_img}}"></image>
            <view class='upload_success_frame' wx:if="{{tmp_percent[index].percent >= 100}}">
              <image style='margin:0 0 0 0;width:38rpx;height:38rpx;' src='/images/check_alt_512x512.png'></image>
            </view>
            <view class='upload_mask' wx:if="{{tmp_percent[index].percent < 100}}" >
              <label>{{tmp_percent[index].percent}}%</label>
            </view>
            <!-- <progress class='upload_progress' percent="{{tmp_percent[index].percent}}" stroke-width="6" wx:if="{{tmp_percent[index].percent > 0}}"  activeColor='#932c3f' active /> -->
            <input class="display_hide" name="upimgs{{index}}" value="{{img.tmp_img}}"></input>
          </view>
        </view>
      </view>
      <input class='display_hide' name="img_lenth" value="{{img_lenth}}"></input>
      <input class="display_hide" name="box_mac" value="{{box_mac}}"></input>
      <input class="display_hide" name="openid"  value="{{openid}}"></input>
      <view class="display_{{showTpBt?'show':'hide'}}">
         <label class='tip_text tip_font_30'>为所有照片增加文字（选填）</label>
        <textarea class='text_input' name="forscreen_char" maxlength='30' placeholder='1-30字' ></textarea>
        <button class="savor-btn savor-btn-size" form-type="submit" hover-class="none" >投屏</button>
      </view>
    </form>
    <view class="rechoose_button_pic display_{{showThird?'show':'hide'}}">
      <view class='tip_font_24'>
        <label style='margin:0 60rpx 0 60rpx;display: block;text-align: center; color:#666666;' >为保障个人隐私，热点投屏不会留存任何投屏记录，您所投内容将在退出投屏后系统自动销毁</label>
      </view>
      <view class='rechoose_button_frame'>
        <image bindtap="chooseImage" data-boxmac="{{box_mac}}" data-openid="{{openid}}" class='rechoose_button' src='/images/button_rechoose_pic.png'></image>
        <image bindtap="exitForscreen" class='rechoose_button button_space' data-boxmac="{{box_mac}}" src='/images/button_exit_cast_screen.png'></image>
      </view>
    </view>
  </view>


  <!--投屏视频 -->
  <view class="full_width display_{{showVedio?'show':'hide'}}">
    <view class='launch_video_page_top flex_row_center tip_font_30'>
      <label >视频上传成功后，电视下载完毕开始播放</label>
      <label class='link_relief'><navigator url="/pages/forscreen/relief">免责声明</navigator></label>
    </view>
    <view class='launch_video_page_main'>
      <view class='cover full_width'>
        <video class="screen_video" src='{{upload_vedio_temp}}' ></video>
        <view class='mask_layer flex_column_center'>
          <view>
            <label class='font_white_34'>{{vedio_percent}}%</label>
            <progress percent='{{vedio_percent}}' stroke-width="5" activeColor='#FFFFFF' backgroundColor="#6F6F6F" active />
          </view>
        </view>
      </view>
    </view>
    <view class='launch_video_page_bottom flex_row_center'>
      <button class='btn_background_034' bindtap='chooseVedio' data-boxmac="{{box_mac}}" data-openid="{{openid}}">重选视频</button>
      <button class='btn_background_034' bindtap="exitForscreen" data-boxmac="{{box_mac}}" data-openid="{{openid}}">退出投屏</button>
    </view>
  </view>
  
</view>
